#!/usr/bin/env node
var minimist  = require('minimist');
var xcss      = require('./index');
var compile   = require('./compiler');
var fs        = require('fs');

var argv = minimist(process.argv, {boolean: ['c', 'compile']});
var file = argv._[2];

if (!file || !fs.existsSync(file)) {
  console.warn('error: provide a filename as an argument');
  process.exit(1);
}

if (argv['xcss-module-path']) {
  process.env.XCSS_MODULE_PATH = argv['xcss-module-path'];
}

if (argv.compile || argv.c) {
  console.log(compile(fs.readFileSync(file, 'utf8')));
} else {
  console.log(require(argv._[2]).toString());
}
